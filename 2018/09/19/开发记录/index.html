<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>开发记录 | WangPangPang | be hangry be foolish</title>

  
  <meta name="author" content="王琪">
  

  
  <meta name="description" content="write I want to">
  

  
  <meta name="keywords" content="ios">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="开发记录"/>

  <meta property="og:site_name" content="WangPangPang"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="WangPangPang" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">WangPangPang</a>
    </h1>
    <p class="site-description">be hangry be foolish</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>开发记录</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2018/09/19/开发记录/" rel="bookmark">
        <time class="entry-date published" datetime="2018-09-19T02:08:11.000Z">
          2018-09-19
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="2018-9-19"><a href="#2018-9-19" class="headerlink" title="2018.9.19"></a>2018.9.19</h2><p>ijkplayer设置请求头：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IJKFFOptions *options = [IJKFFOptions optionsByDefault];</span><br><span class="line">    [options setFormatOptionValue:@&quot;Referer:www.juexiaotime.com&quot; forKey:@&quot;headers&quot;];</span><br></pre></td></tr></table></figure></p>
<p> 多个headers用\r\n隔开</p>
<h2 id="2018-9-26"><a href="#2018-9-26" class="headerlink" title="2018.9.26"></a>2018.9.26</h2><p> injection3 开发界面调试工具:<br> 1、在我们的项目中- (BOOL)application:(UIApplication <em>)application didFinishLaunchingWithOptions:(NSDictionary </em>)launchOptions方法加入如下代码：<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> if DEBUG</span><br><span class="line">// for iOS</span><br><span class="line">[[NSBundle bundleWithPath:@&quot;/Applications/InjectionIII.app/Contents/Resources/iOSInjection.bundle&quot;] load];</span><br><span class="line">// for tvOS</span><br><span class="line">[[NSBundle bundleWithPath:@&quot;/Applications/InjectionIII.app/Contents/Resources/tvOSInjection.bundle&quot;] load];</span><br><span class="line">// for masOS</span><br><span class="line">[[NSBundle bundleWithPath:@&quot;/Applications/InjectionIII.app/Contents/Resources/macOSInjection.bundle&quot;] load];</span><br><span class="line">endif</span><br></pre></td></tr></table></figure></p>
<p> 2、需要修改的文件里添加方法，输入代码后command+s改变UI<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> -(void)injected&#123;</span><br><span class="line">NSLog(@&quot;I&apos;ve been injected: %@&quot;, self);</span><br><span class="line">self.view.backgroundColor = [UIColor goldColor];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="2018-9-27"><a href="#2018-9-27" class="headerlink" title="2018.9.27"></a>2018.9.27</h2><p>修改textview的menuitem直接重写<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//设置菜单 </span><br><span class="line">UIMenuItem *menuItem = [[UIMenuItem alloc]initWithTitle:@&quot;响应菜单&quot; action:@selector(selfMenu:)]; </span><br><span class="line">UIMenuController *menuController = [UIMenuController sharedMenuController]; </span><br><span class="line">[menuController setMenuItems:[NSArray arrayWithObject:menuItem]];</span><br><span class="line"></span><br><span class="line">-(BOOL)canPerformAction:(SEL)action withSender:(id)sender</span><br></pre></td></tr></table></figure></p>
<p>这个方法会继承系统默认的menuitem方法，必须继承textview，在textview的子类里重写上面的方法才行</p>
<h2 id="2018-10-7"><a href="#2018-10-7" class="headerlink" title="2018.10.7"></a>2018.10.7</h2><p>1、记一次蛋疼的bug，原生输入法再输入一次文字之后会自动添加很多乱码字符，打断点一句一句代码看过之后发现是在某个角落循环调用给textView赋值了，虽然修改起来很简单，但反应到前端的效果还是一脸懵逼的。<br>2、在输入框光标位置插入文字：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NSMutableString *mutableString = self.textView.text.mutableCopy;</span><br><span class="line">    [mutableString insertString:resultFromJson atIndex:self.textView.selectedRange.location];</span><br><span class="line">    self.textView.text = mutableString;</span><br></pre></td></tr></table></figure></p>
<p>3、<code>NSIntersectionRange(&lt;#NSRange range1#&gt;, &lt;#NSRange range2#&gt;)</code>交集<br><code>NSUnionRange(&lt;#NSRange range1#&gt;, &lt;#NSRange range2#&gt;)</code>并集</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    

    </div>

    
  </div>
</article>


    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2018 王琪
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>